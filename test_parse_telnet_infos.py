from parse_telnet_infos import parse_line
from parse_header_xml import parse_header_information


test_line1 = "pm 8 1.2 8.4 58 48 60 9 10 0 0 0 2 2 0 0 17 15 120 -20 120 -20 120 125 58 33 37 116.4 92.6 77 48 0 0 58 56 0 43 0 0 -5 50 0 0 100 100 8 0 47 73 1 0 -20 0 20 20 0 1 30 34 20 22 1 1 140 0 20 20 0 1 -20 0 20 20 0 1 -20 0 20 20 0 1 -20 0 20 20 0 1 -20 0 20 20 0 1 -20 0 0 56 0 0 -20 0 0 -20 0 0 0 0 0 34 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 140 -20 -20 -20 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -20 -20 0083 4000 0020 0000 0000 0160 0000 0000 "
full_channel_infos = parse_header_information("test\\xml\\Full.DAQ")
partial_channel_infos = parse_header_information("test\\xml\\DAQ00000.xml")


print("Testing parse_line(test_line1, full_channel_infos)")
expected_result = [{'name': 'ZK', 'unit': '', 'value': '8'},{'name': 'O2', 'unit': '%', 'value': '1.2'},{'name': 'O2soll', 'unit': '%', 'value': '8.4'},{'name': 'TK', 'unit': '°C', 'value': '58'},{'name': 'TKsoll', 'unit': '°C', 'value': '48'},{'name': 'TRG', 'unit': '°C', 'value': '60'},{'name': 'SZist', 'unit': '%', 'value': '9'},{'name': 'SZsoll', 'unit': '%', 'value': '10'},{'name': 'Leistung', 'unit': '%', 'value': '0'},{'name': 'ESsoll', 'unit': '%', 'value': '0'},{'name': 'I Es', 'unit': 'mA', 'value': '0'},{'name': 'I Ra', 'unit': 'mA', 'value': '2'},{'name': 'I Aa', 'unit': 'mA', 'value': '2'},{'name': 'I Sr', 'unit': 'mA', 'value': '0'},{'name': 'I Rein', 'unit': 'mA', 'value': '0'},{'name': 'Taus', 'unit': '°C', 'value': '17'},{'name': 'TA Gem.', 'unit': '°C', 'value': '15'},{'name': 'TPo', 'unit': '°C', 'value': '120'},{'name': 'TPmo', 'unit': '°C', 'value': '-20'},{'name': 'TPm', 'unit': '°C', 'value': '120'},{'name': 'TPmu', 'unit': '°C', 'value': '-20'},{'name': 'TPu', 'unit': '°C', 'value': '120'},{'name': 'TFW', 'unit': '°C', 'value': '125'},{'name': 'TRL', 'unit': '°C', 'value': '58'},{'name': 'TRLsoll', 'unit': '°C', 'value': '33'},{'name': 'Tplat', 'unit': '°C', 'value': '37'},{'name': 'BRT', 'unit': '°C', 'value': '116.4'},{'name': 'Regler K', 'unit': '', 'value': '92.6'},{'name': 'KeBrstScale', 'unit': '%', 'value': '77'},{'name': 'ESRegler', 'unit': '%', 'value': '48'},{'name': 'BLDC_ES ist', 'unit': 'rpm', 'value': '0'},{'name': 'BLDC_ES soll', 'unit': 'rpm', 'value': '0'},{'name': 'LZ ES seit Füll.', 'unit': 'Min', 'value': '58'},{'name': 'LZ ES seit Ent.', 'unit': 'Min', 'value': '56'},{'name': 'Anzahl Entasch.', 'unit': '', 'value': '0'},{'name': 'Anzahl SR Beweg.', 'unit': '', 'value': '43'},{'name': 'Heiz P Lambda', 'unit': 'W', 'value': '0'},{'name': 'Heiz U Lambda', 'unit': 'V', 'value': '0'},{'name': 'Heiz I Lambda', 'unit': 'mA', 'value': '-5'},{'name': 'Sens U Lambda', 'unit': 'mV', 'value': '50'},{'name': 'PuffZustand', 'unit': '', 'value': '0'},{'name': 'Puffer_soll', 'unit': '°C', 'value': '0'},{'name': 'Puff Füllgrad', 'unit': '%', 'value': '100'},{'name': 'max.Leist.P3F.HT', 'unit': '%', 'value': '100'},{'name': 'Spreizung', 'unit': '°C', 'value': '8'},{'name': 'AIN17', 'unit': 'V', 'value': '0'},{'name': 'Lagerstand', 'unit': 'kg', 'value': '47'},{'name': 'Verbrauchszähler', 'unit': 'kg', 'value': '73'},{'name': 'UsePos', 'unit': '', 'value': '1'},{'name': 'Störungs Nr', 'unit': '', 'value': '0'},{'name': 'TVL_A', 'unit': '°C', 'value': '-20'},{'name': 'TVLs_A', 'unit': '°C', 'value': '0'},{'name': 'TRA_A', 'unit': '°C', 'value': '20'},{'name': 'TRs_A', 'unit': '°C', 'value': '20'},{'name': 'HKZustand_A', 'unit': '', 'value': '0'},{'name': 'FRA Zustand', 'unit': '', 'value': '1'},{'name': 'TVL_1', 'unit': '°C', 'value': '30'},{'name': 'TVLs_1', 'unit': '°C', 'value': '34'},{'name': 'TRA_1', 'unit': '°C', 'value': '20'},{'name': 'TRs_1', 'unit': '°C', 'value': '22'},{'name': 'HKZustand_1', 'unit': '', 'value': '1'},{'name': 'FR1 Zustand', 'unit': '', 'value': '1'},{'name': 'TVL_2', 'unit': '°C', 'value': '140'},{'name': 'TVLs_2', 'unit': '°C', 'value': '0'},{'name': 'TRA_2', 'unit': '°C', 'value': '20'},{'name': 'TRs_2', 'unit': '°C', 'value': '20'},{'name': 'HKZustand_2', 'unit': '', 'value': '0'},{'name': 'FR2 Zustand', 'unit': '', 'value': '1'},{'name': 'TVL_3', 'unit': '°C', 'value': '-20'},{'name': 'TVLs_3', 'unit': '°C', 'value': '0'},{'name': 'TRA_3', 'unit': '°C', 'value': '20'},{'name': 'TRs_3', 'unit': '°C', 'value': '20'},{'name': 'HKZustand_3', 'unit': '', 'value': '0'},{'name': 'FR3 Zustand', 'unit': '', 'value': '1'},{'name': 'TVL_4', 'unit': '°C', 'value': '-20'},{'name': 'TVLs_4', 'unit': '°C', 'value': '0'},{'name': 'TRA_4', 'unit': '°C', 'value': '20'},{'name': 'TRs_4', 'unit': '°C', 'value': '20'},{'name': 'HKZustand_4', 'unit': '', 'value': '0'},{'name': 'FR4 Zustand', 'unit': '', 'value': '1'},{'name': 'TVL_5', 'unit': '°C', 'value': '-20'},{'name': 'TVLs_5', 'unit': '°C', 'value': '0'},{'name': 'TRA_5', 'unit': '°C', 'value': '20'},{'name': 'TRs_5', 'unit': '°C', 'value': '20'},{'name': 'HKZustand_5', 'unit': '', 'value': '0'},{'name': 'FR5 Zustand', 'unit': '', 'value': '1'},{'name': 'TVL_6', 'unit': '°C', 'value': '-20'},{'name': 'TVLs_6', 'unit': '°C', 'value': '0'},{'name': 'TRA_6', 'unit': '°C', 'value': '20'},{'name': 'TRs_6', 'unit': '°C', 'value': '20'},{'name': 'HKZustand_6', 'unit': '', 'value': '0'},{'name': 'FR6 Zustand', 'unit': '', 'value': '1'},{'name': 'TBA', 'unit': '°C', 'value': '-20'},{'name': 'TBs_A', 'unit': '°C', 'value': '0'},{'name': 'BoiZustand_A', 'unit': '', 'value': '0'},{'name': 'TB1', 'unit': '°C', 'value': '56'},{'name': 'TBs_1', 'unit': '°C', 'value': '0'},{'name': 'BoiZustand_1', 'unit': '', 'value': '0'},{'name': 'TB2', 'unit': '°C', 'value': '-20'},{'name': 'TBs_2', 'unit': '°C', 'value': '0'},{'name': 'BoiZustand_2', 'unit': '', 'value': '0'},{'name': 'TB3', 'unit': '°C', 'value': '-20'},{'name': 'TBs_3', 'unit': '°C', 'value': '0'},{'name': 'BoiZustand_3', 'unit': '', 'value': '0'},{'name': 'Ext.HK Soll', 'unit': '', 'value': '0'},{'name': 'Ext.HK Soll_2', 'unit': '', 'value': '0'},{'name': 'Ext.HK Soll_3', 'unit': '', 'value': '0'},{'name': 'Höchste Anf', 'unit': '', 'value': '34'},{'name': 'Anf. HKR0', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR1', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR2', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR3', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR4', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR5', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR6', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR7', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR8', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR9', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR10', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR11', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR12', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR13', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR14', 'unit': '°C', 'value': '0'},{'name': 'Anf. HKR15', 'unit': '°C', 'value': '0'},{'name': 'KaskSollTmp_1', 'unit': '°C', 'value': '0'},{'name': 'KaskSollTmp_2', 'unit': '°C', 'value': '0'},{'name': 'KaskSollTmp_3', 'unit': '°C', 'value': '0'},{'name': 'KaskSollTmp_4', 'unit': '°C', 'value': '0'},{'name': 'KaskIstTmp_1', 'unit': '°C', 'value': '0'},{'name': 'KaskIstTmp_2', 'unit': '°C', 'value': '0'},{'name': 'KaskIstTmp_3', 'unit': '°C', 'value': '0'},{'name': 'KaskIstTmp_4', 'unit': '°C', 'value': '0'},{'name': 'T Spülung', 'unit': '°C', 'value': '140'},{'name': 'DiffReg S1', 'unit': '°C', 'value': '-20'},{'name': 'DiffReg S2', 'unit': '°C', 'value': '-20'},{'name': 'TVG', 'unit': '°C', 'value': '-20'},{'name': 'WMZ_1_TVL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_1_TRL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_1_PWR', 'unit': 'kW', 'value': '-1'},{'name': 'WMZ_1_FLOW', 'unit': 'l/h', 'value': '-1'},{'name': 'WMZ_2_TVL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_2_TRL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_2_PWR', 'unit': 'kW', 'value': '-1'},{'name': 'WMZ_2_FLOW', 'unit': 'l/h', 'value': '-1'},{'name': 'WMZ_3_TVL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_3_TRL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_3_PWR', 'unit': 'kW', 'value': '-1'},{'name': 'WMZ_3_FLOW', 'unit': 'l/h', 'value': '-1'},{'name': 'WMZ_4_TVL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_4_TRL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_4_PWR', 'unit': 'kW', 'value': '-1'},{'name': 'WMZ_4_FLOW', 'unit': 'l/h', 'value': '-1'},{'name': 'WMZ_5_TVL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_5_TRL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_5_PWR', 'unit': 'kW', 'value': '-1'},{'name': 'WMZ_5_FLOW', 'unit': 'l/h', 'value': '-1'},{'name': 'WMZ_6_TVL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_6_TRL', 'unit': '°C', 'value': '-1'},{'name': 'WMZ_6_PWR', 'unit': 'kW', 'value': '-1'},{'name': 'WMZ_6_FLOW', 'unit': 'l/h', 'value': '-1'},{'name': 'FWS1 Anf.', 'unit': '°C', 'value': '0'},{'name': 'FWS1 Pumpe', 'unit': '%', 'value': '0'},{'name': 'FWS1 Leist', 'unit': 'kW', 'value': '0'},{'name': 'FWS1 T', 'unit': '°C', 'value': '0'},{'name': 'FWS1 D', 'unit': 'l/min', 'value': '0'},{'name': 'FWS2 Anf.', 'unit': '°C', 'value': '0'},{'name': 'FWS2 Pumpe', 'unit': '%', 'value': '0'},{'name': 'FWS2 Leist', 'unit': 'kW', 'value': '0'},{'name': 'FWS2 T', 'unit': '°C', 'value': '0'},{'name': 'FWS2 D', 'unit': 'l/min', 'value': '0'},{'name': 'FWS3 Anf.', 'unit': '°C', 'value': '0'},{'name': 'FWS3 Pumpe', 'unit': '%', 'value': '0'},{'name': 'FWS3 Leist', 'unit': 'kW', 'value': '0'},{'name': 'FWS3 T', 'unit': '°C', 'value': '0'},{'name': 'FWS3 D', 'unit': 'l/min', 'value': '0'},{'name': 'FWS4 Anf.', 'unit': '°C', 'value': '0'},{'name': 'FWS4 Pumpe', 'unit': '%', 'value': '0'},{'name': 'FWS4 Leist', 'unit': 'kW', 'value': '0'},{'name': 'FWS4 T', 'unit': '°C', 'value': '0'},{'name': 'FWS4 D', 'unit': 'l/min', 'value': '0'},{'name': 'DiffReg2 S3', 'unit': '°C', 'value': '-20'},{'name': 'DiffReg2 S4', 'unit': '°C', 'value': '-20'},{'name': 'Stb', 'unit': 'bool', 'value': 1},{'name': 'Fuellstand', 'unit': 'bool', 'value': 1},{'name': 'Es Rein Endl', 'unit': 'bool', 'value': 0},{'name': 'HKPA', 'unit': 'bool', 'value': 0},{'name': 'MAA', 'unit': 'bool', 'value': 0},{'name': 'MAZ', 'unit': 'bool', 'value': 0},{'name': 'HKP1', 'unit': 'bool', 'value': 1},{'name': 'M1A', 'unit': 'bool', 'value': 0},{'name': 'M1Z', 'unit': 'bool', 'value': 0},{'name': 'HKP2', 'unit': 'bool', 'value': 0},{'name': 'M2A', 'unit': 'bool', 'value': 0},{'name': 'M2Z', 'unit': 'bool', 'value': 0},{'name': 'Störung', 'unit': 'bool', 'value': 0},{'name': 'L Heiz.', 'unit': 'bool', 'value': 0},{'name': 'Z Heiz.', 'unit': 'bool', 'value': 0},{'name': 'Z Geb.', 'unit': 'bool', 'value': 0},{'name': 'AA Run', 'unit': 'bool', 'value': 0},{'name': 'AA Dir', 'unit': 'bool', 'value': 0},{'name': 'ES Run', 'unit': 'bool', 'value': 0},{'name': 'ES Dir', 'unit': 'bool', 'value': 0},{'name': 'AS Saug', 'unit': 'bool', 'value': 0},{'name': 'AS RA Run', 'unit': 'bool', 'value': 0},{'name': 'AS RA Dir', 'unit': 'bool', 'value': 0},{'name': 'Rein En', 'unit': 'bool', 'value': 0},{'name': 'Rein Run', 'unit': 'bool', 'value': 0},{'name': 'RLm_auf', 'unit': 'bool', 'value': 0},{'name': 'RLm_zu', 'unit': 'bool', 'value': 0},{'name': 'RL Pumpe', 'unit': 'bool', 'value': 1},{'name': 'BPA', 'unit': 'bool', 'value': 0},{'name': 'BP1', 'unit': 'bool', 'value': 0},{'name': 'BP2', 'unit': 'bool', 'value': 0},{'name': 'BP3', 'unit': 'bool', 'value': 0},{'name': 'BZPA', 'unit': 'bool', 'value': 0},{'name': 'BZP1', 'unit': 'bool', 'value': 1},{'name': 'BZP2', 'unit': 'bool', 'value': 0},{'name': 'BZP3', 'unit': 'bool', 'value': 0},{'name': 'EHKP', 'unit': 'bool', 'value': 0},{'name': 'EHKP2', 'unit': 'bool', 'value': 0},{'name': 'EHKP3', 'unit': 'bool', 'value': 0},{'name': 'EHK Anf', 'unit': 'bool', 'value': 0},{'name': 'EHK Anf2', 'unit': 'bool', 'value': 0},{'name': 'EHK Anf3', 'unit': 'bool', 'value': 0},{'name': 'HKP3', 'unit': 'bool', 'value': 0},{'name': 'M3A', 'unit': 'bool', 'value': 0},{'name': 'M3Z', 'unit': 'bool', 'value': 0},{'name': 'HKP4', 'unit': 'bool', 'value': 0},{'name': 'M4A', 'unit': 'bool', 'value': 0},{'name': 'M4Z', 'unit': 'bool', 'value': 0},{'name': 'HKP5', 'unit': 'bool', 'value': 0},{'name': 'M5A', 'unit': 'bool', 'value': 0},{'name': 'M5Z', 'unit': 'bool', 'value': 0},{'name': 'HKP6', 'unit': 'bool', 'value': 0},{'name': 'M6A', 'unit': 'bool', 'value': 0},{'name': 'M6Z', 'unit': 'bool', 'value': 0},{'name': 'PuffP', 'unit': 'bool', 'value': 0},{'name': 'Entasch gesp.', 'unit': 'bool', 'value': 0},{'name': 'ATW', 'unit': 'bool', 'value': 0},{'name': 'KASK1 Run', 'unit': 'bool', 'value': 0},{'name': 'KASK2 Run', 'unit': 'bool', 'value': 0},{'name': 'KASK3 Run', 'unit': 'bool', 'value': 0},{'name': 'KASK4 Run', 'unit': 'bool', 'value': 0},{'name': 'FW Freig.', 'unit': 'bool', 'value': 0},{'name': 'sAS Anf Füll', 'unit': 'bool', 'value': 0},{'name': 'HKV', 'unit': 'bool', 'value': 0},{'name': 'FLP', 'unit': 'bool', 'value': 0},{'name': 'Netztrafo', 'unit': 'bool', 'value': 1},{'name': 'Netzrelais', 'unit': 'bool', 'value': 1},{'name': 'Lagerraum', 'unit': 'bool', 'value': 0},{'name': 'Aschebox', 'unit': 'bool', 'value': 1},{'name': 'gFlP', 'unit': 'bool', 'value': 0},{'name': 'gFlM auf', 'unit': 'bool', 'value': 0},{'name': 'gFlM zu', 'unit': 'bool', 'value': 0},{'name': 'Spülung Aktiv', 'unit': 'bool', 'value': 0},{'name': 'DReg P1', 'unit': 'bool', 'value': 0},{'name': 'DReg P2', 'unit': 'bool', 'value': 0},{'name': 'DReg Mi auf', 'unit': 'bool', 'value': 0},{'name': 'DReg Mi zu', 'unit': 'bool', 'value': 0},{'name': 'Oel Out', 'unit': 'bool', 'value': 0},{'name': 'DReg2 P1', 'unit': 'bool', 'value': 0},{'name': 'DReg2 P2', 'unit': 'bool', 'value': 0},{'name': 'DReg2 Mi auf', 'unit': 'bool', 'value': 0},{'name': 'DReg2 Mi zu', 'unit': 'bool', 'value': 0}]
result = parse_line(test_line1, full_channel_infos)
if result == expected_result:
    print("Passed.")
else:
    print("Failed!")
print("\n")


print("Testing parse_line(test_line1, partial_channel_infos)")
expected_result = [{'name': 'ZK', 'unit': '', 'value': '8'},{'name': 'O2', 'unit': '%', 'value': '1.2'},{'name': 'O2soll', 'unit': '%', 'value': '8.4'},{'name': 'TK', 'unit': '°C', 'value': '58'},{'name': 'TKsoll', 'unit': '°C', 'value': '48'},{'name': 'TRG', 'unit': '°C', 'value': '60'},{'name': 'SZist', 'unit': '%', 'value': '9'},{'name': 'FWS3 D', 'unit': 'l/min', 'value': '0'},{'name': 'FWS4 Anf.', 'unit': '°C', 'value': '0'},{'name': 'FWS4 Pumpe', 'unit': '%', 'value': '0'},{'name': 'FWS4 Leist', 'unit': 'kW', 'value': '0'},{'name': 'FWS4 T', 'unit': '°C', 'value': '0'},{'name': 'FWS4 D', 'unit': 'l/min', 'value': '0'},{'name': 'DiffReg2 S3', 'unit': '°C', 'value': '-20'},{'name': 'DiffReg2 S4', 'unit': '°C', 'value': '-20'},{'name': 'Stb', 'unit': 'bool', 'value': 1},{'name': 'Fuellstand', 'unit': 'bool', 'value': 1},{'name': 'Es Rein Endl', 'unit': 'bool', 'value': 0},{'name': 'HKPA', 'unit': 'bool', 'value': 0},{'name': 'MAA', 'unit': 'bool', 'value': 0},{'name': 'MAZ', 'unit': 'bool', 'value': 0},{'name': 'HKP1', 'unit': 'bool', 'value': 1},{'name': 'M1A', 'unit': 'bool', 'value': 0},{'name': 'gFlP', 'unit': 'bool', 'value': 0},{'name': 'gFlM auf', 'unit': 'bool', 'value': 0},{'name': 'gFlM zu', 'unit': 'bool', 'value': 0},{'name': 'Spülung Aktiv', 'unit': 'bool', 'value': 0},{'name': 'DReg P1', 'unit': 'bool', 'value': 0},{'name': 'DReg P2', 'unit': 'bool', 'value': 0},{'name': 'DReg Mi auf', 'unit': 'bool', 'value': 0},{'name': 'DReg Mi zu', 'unit': 'bool', 'value': 0},{'name': 'Oel Out', 'unit': 'bool', 'value': 0},{'name': 'DReg2 P1', 'unit': 'bool', 'value': 0},{'name': 'DReg2 P2', 'unit': 'bool', 'value': 0},{'name': 'DReg2 Mi auf', 'unit': 'bool', 'value': 0},{'name': 'DReg2 Mi zu', 'unit': 'bool', 'value': 0}]
result = parse_line(test_line1, partial_channel_infos)
if result == expected_result:
    print("Passed.")
else:
    print("Failed!")
print("\n")




